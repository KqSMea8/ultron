(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1083:function(e,t,a){"use strict";a.r(t);var n=a(223),s=a(252),i=a(226),r=a(405);class o extends s.a{constructor(e,t){super(),this.type="aa",this.proportion=0,this.difference=[],this.params=[],this.colorAny=[],this.dataChartAver={},this.loading=!0,this.leftPadding=0,this.rightPadding=0,this.getPadding(),this.initByQueryFields(e),this.loadDataList(),window.onresize=(()=>{this.getPadding()})}getQueryFields(){return["type"]}getPadding(){const e=document.documentElement;e.clientWidth%350-20?(this.rightPadding=(e.clientWidth%350-20)/2,this.leftPadding=(e.clientWidth%350-20)/2+20):(this.rightPadding=(e.clientWidth%350+350-20)/2,this.leftPadding=(e.clientWidth%350+350-20)/2+20)}createOption(e){let t=[];switch(!0){case e.ratio<.6:t=[[e.ratio.toFixed(1),"#FE0000"],[1,"#E4E8EB"]];break;case e.ratio>=.6&&e.ratio<1:t=[[e.ratio.toFixed(1),"#FA8919"],[1,"#E4E8EB"]];break;default:t=[[1,"#11A699"]]}return{title:{text:"达标率",textStyle:{fontSize:12,color:"#CDCDCD"},left:55,bottom:58},toolbox:{show:!0,feature:{mark:{show:!0}}},series:[{name:"容量指标",type:"gauge",detail:{formatter:"{value}%",fontSize:25,fontWeight:500,offsetCenter:[0,17],color:t[0][1]},pointer:{show:!1},startAngle:200,endAngle:-25,radius:[65],center:["43%",70],splitNumber:10,axisLine:{lineStyle:{color:t,width:10}},axisTick:{splitNumber:10,length:0},axisLabel:{show:!1},splitLine:{show:!0,length:0},data:[{value:Math.round(100*e.ratio)}]}]}}loadDataList(){return n.__awaiter(this,void 0,void 0,function*(){try{const e=yield Object(r.a)({});this.loading=!1,this.params=e}catch(e){}})}}n.__decorate([i.l,n.__metadata("design:type",String)],o.prototype,"type",void 0),n.__decorate([i.l,n.__metadata("design:type",Number)],o.prototype,"proportion",void 0),n.__decorate([i.l,n.__metadata("design:type",Array)],o.prototype,"difference",void 0),n.__decorate([i.l,n.__metadata("design:type",Array)],o.prototype,"params",void 0),n.__decorate([i.l,n.__metadata("design:type",Array)],o.prototype,"colorAny",void 0),n.__decorate([i.l,n.__metadata("design:type",Object)],o.prototype,"dataChartAver",void 0),n.__decorate([i.l,n.__metadata("design:type",Boolean)],o.prototype,"loading",void 0),n.__decorate([i.l,n.__metadata("design:type",Number)],o.prototype,"leftPadding",void 0),n.__decorate([i.l,n.__metadata("design:type",Number)],o.prototype,"rightPadding",void 0);var c=a(251),d=a(738),l=a(1),u=a.n(l),p=a(228),h=a(191),m=a.n(h),g=a(233),y=a(14);a(279);let f=class extends c.a{createModel(){return new o(this.query)}complianceRate(e){this.push({url:"/ultron/capacity/target",query:{type:"complianceRate",businessId:e.target.getAttribute("data-businessid"),businessName:e.target.getAttribute("data-businessname")}})}businessModule(e){this.push({url:"/ultron/capacity/target",query:{type:"businessModule",businessId:e.target.getAttribute("data-businessid"),businessName:e.target.getAttribute("data-businessname")}})}render(){return u.a.createElement(y.a,{spinning:this.model.loading,size:"large"},u.a.createElement("div",{className:m.a.spin,style:{paddingLeft:this.model.leftPadding,paddingRight:this.model.rightPadding}},this.model.params.map((e,t)=>u.a.createElement("div",{key:t,className:m.a.SpinCol},u.a.createElement(d.a,{paramsItemData:e,model:this.model,complianceRate:this.complianceRate,businessModule:this.businessModule,isFromPlate:!1})))))}};n.__decorate([Object(g.Bind)(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Object]),n.__metadata("design:returntype",void 0)],f.prototype,"complianceRate",null),n.__decorate([Object(g.Bind)(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Object]),n.__metadata("design:returntype",void 0)],f.prototype,"businessModule",null),f=n.__decorate([p.a],f);t.default=f},239:function(e,t,a){"use strict";var n=a(16),s=a(246),i=(a(245),a(18));const r=0,o=Object.assign({},{dataKey:"data",errorMsgKey:"errmsg",errorCodeKey:"errno"},{dataKey:"data",errorMsgKey:"errmsg",errorCodeKey:"errno"});function c(e,t={}){return new Promise((a,n)=>{(function(e,t={}){return i.a.start(),new Promise((a,n)=>{fetch(e,Object.assign({credentials:"include"},t)).then(e=>{e.ok?e.json().then(e=>{const t=e;if(t.status){const e=+t.status;n({msg:"status error",code:e,data:t})}else a(e);i.a.done()},e=>{console.error(`${e}`,typeof e,Object.prototype.toString.call(e)),n({msg:"[object Object]"===Object.prototype.toString.call(e)?JSON.stringify(e):`${e}`,code:200}),i.a.done()}):(n({msg:e.statusText,code:e.status}),i.a.done())},e=>{n({msg:"[object Object]"===Object.prototype.toString.call(e)?JSON.stringify(e):`${e}`,code:400}),i.a.done()})})})(e,t).then(e=>{Number(e[o.errorCodeKey])===r||"0000"===e.code?a(e[o.dataKey]):n({msg:e[o.errorMsgKey],code:Number(e[o.errorCodeKey])})},n)})}function d(e,t={},a={}){let s=Object(n.stringify)(t);if(t instanceof FormData){const e=t;t={};for(const a of e){const e=a.valueOf();t=Object.assign({},t,{[e[0]]:e[1]})}}return t&&Object.keys(t).length&&(s=`?${Object(n.stringify)(t)}`),c(`${e}${s}`,a)}function l(e,t={},a={}){const n={accept:"application/json"};let s=t;return t instanceof FormData?n["Content-Type"]="multipart/form-data":(n["Content-Type"]="application/json; charset=utf-8",s=JSON.stringify(t)),c(e,Object.assign({body:s,headers:Object.assign({},a.headers,n)},a))}function u(e){return e.catch(e=>{console.error(e),e.msg.indexOf("test_plan is exists")>-1?s.a.error("压测名称已存在"):"status error"!==e.msg&&s.a.error(e.msg)}),e}const p=(e,t={},a={})=>u(d(e,t,{method:"GET",headers:a})),h=(e,t={},a={})=>u(l(e,t,{method:"POST",headers:a})),m=(e,t={},a={})=>u(l(e,t,{method:"PUT",headers:a})),g=(e,t={},a={})=>u(d(e,t,{method:"DELETE",headers:a}));var y=a(1),f=a.n(y),b=a(9),_=(a(255),a(141)),v=a.n(_);function j(e,t={},a){return("/api"+e.replace(/\{[^\{\}]+\}/g,e=>{const n=e.slice(1,-1);return null!=t[n]?t[n]:a&&null!=a[n]?a[n]:e})).replace("/api/ultron","/ultronProxy")}a.d(t,"b",function(){return C}),a.d(t,"c",function(){return w}),a.d(t,"d",function(){return x}),a.d(t,"a",function(){return N});const E=e=>{const t=e?+e.code:403;if(302===t&&/(0\.0|183\.37|ultron\.intra|ultron-test)/.test(location.hostname)){const t=encodeURIComponent(location.href),a=`${e.data.url}&jumpto=${t}`;location.assign(a)}else 403===t&&b.a.info({title:"操作提示",width:500,content:f.a.createElement("div",null,f.a.createElement("a",{href:"http://upm.xiaojukeji.com/index.html#/",className:v.a.a},f.a.createElement("p",null,"对不起你没有相关操作权限，如有需要请到"),f.a.createElement("p",null,"http://upm.xiaojukeji.com/inde.html进行申请，谢谢")))})},O={Host:"ultron.intra.xiaojukeji.com"};function C(e,t,a,n){const s=Object.assign({},O,n);return p(j(e,a,t),t,s).catch(E)}function w(e,t,a,n){const s=t instanceof FormData?{}:{"Content-Type":"application/json; charset=utf-8;"},i=Object.assign(s,O,n);return h(j(e,a,t),t,i).catch(E)}function x(e,t,a,n){const s=t instanceof FormData?{}:{"Content-Type":"application/json; charset=utf-8;"},i=Object.assign(s,O,n);return m(j(e,a,t),t,i).catch(E)}function N(e,t,a,n){const s=t instanceof FormData?{}:{"Content-Type":"application/json; charset=utf-8;"},i=Object.assign(s,O,n);return g(j(e,a,t),t,i).catch(E)}},250:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(1),s=a.n(n),i=a(260),r=a.n(i);class o extends s.a.Component{constructor(e,t){super(e,t),this.setChartContainer=this.setChartContainer.bind(this),this.onResize=this.onResize.bind(this)}componentDidMount(){this.executeECharts(this.props.data||[]),window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize),this.chartInstance&&this.chartInstance.dispose()}componentWillReceiveProps(e){e.data!==this.props.data&&this.executeECharts(e.data||[])}render(){return s.a.createElement("div",{style:{height:this.props.height||240},ref:this.setChartContainer})}setChartContainer(e){this.chartElement=e}onResize(){this.chartInstance&&this.chartInstance.resize()}executeECharts(e){!this.chartInstance&&this.chartElement&&(this.chartInstance=r.a.init(this.chartElement),this.chartInstance.on("click",e=>{this.props.onClick&&this.props.onClick(e)})),this.chartInstance&&(this.chartInstance.showLoading(),this.chartInstance.setOption(this.dataToEChartOption(e)),this.chartInstance.hideLoading())}}class c extends o{dataToEChartOption(e){return e}}},251:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(1),s=a.n(n);class i extends s.a.Component{constructor(e,t){super(e,t),this.pathname=e.location.pathname,this.query=e.query,this.model=this.createModel()}getUrlObj(e,t){const a=(e||this.pathname).split("?");let n="?"+(a.length>1?a[1]:"");const s=e?t:this.model.getQueryState();return s&&("?"!==n[n.length-1]&&(n+="&"),n+=Object.keys(s).map(e=>e+"="+s[e]).join("&")),{pathname:(0===a[0].indexOf("/new.html")?"":"/new.html")+a[0],search:n}}push(e={}){this.props.history.push(this.getUrlObj(e.url,e.query))}replace(e={}){this.props.history.replace(this.getUrlObj(e.url,e.query))}goBack(){this.props.history.goBack()}goForward(){this.props.history.goForward()}go(e){this.props.history.go(e)}}},252:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(223),s=a(226);class i{setVal(e,t){this[e]=t}initByQueryFields(e={}){this.getQueryFields().forEach(t=>{null!=e[t]&&this.setVal(t,e[t])})}getQueryState(){return this.getQueryFields().reduce((e,t)=>(e[t]=this[t],e),{})}}n.__decorate([s.d,n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[String,Object]),n.__metadata("design:returntype",void 0)],i.prototype,"setVal",null)},334:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(1),s=a.n(n),i=a(355);class r extends s.a.Component{constructor(e,t){super(e,t),this.receivedTopicQueue=[]}dispatch(e,t){Object(i.publish)(e,t)}receiveTopic(e,t){this.receivedTopicQueue.push(Object(i.subscribe)(e,(e,a)=>{t.call(this,a)}))}componentWillUnmount(){for(;this.receivedTopicQueue.length;){const e=this.receivedTopicQueue.pop();e&&Object(i.unsubscribe)(e)}}}},405:function(e,t,a){"use strict";a.d(t,"e",function(){return s}),a.d(t,"a",function(){return i}),a.d(t,"d",function(){return r}),a.d(t,"b",function(){return o}),a.d(t,"c",function(){return c});var n=a(239);function s(e){return Object(n.b)("/ultron/pressure/plate/service",e)}function i(e){return Object(n.b)("/ultron/cqi/business/indices",e)}function r(e,t){return Object(n.b)(`/ultron/cqi/report/${t}`,e)}function o(e,t,a){return Object(n.b)(`/ultron/cqi/report/${t}/module/${a}`,e)}function c(e){return Object(n.b)("/ultron/cqi/curve",e)}},738:function(e,t,a){"use strict";a.d(t,"a",function(){return h});var n=a(223),s=a(1),i=a.n(s),r=(a(158),a(334)),o=a(250),c=a(233),d=a(163),l=a.n(d),u=a(25),p=(a(406),a(2));a(254);class h extends r.a{constructor(e,t){super(e,t),this.state={}}complianceRate(e){this.props.complianceRate(e)}businessModule(e){this.props.businessModule(e)}componentWillMount(){}render(){const e=this.props.paramsItemData;return i.a.createElement(u.a,{bordered:!0,title:e.name,className:l.a.card,style:{width:330}},i.a.createElement("div",{className:l.a.occupiedBox},i.a.createElement("div",{className:l.a.echartSimple},i.a.createElement("div",{className:l.a.echartTitle},this.props.isFromPlate?i.a.createElement("span",{className:l.a.complianceRate},"核心容量指标"):i.a.createElement("a",{"data-businessid":e.id,"data-businessname":e.name,onClick:this.complianceRate,href:"javascript:;"},"核心容量指标")),i.a.createElement("div",{className:l.a.echartBox},i.a.createElement(o.a,{data:this.props.model.createOption({ratio:e.ratio}),height:130}))),i.a.createElement("div",{className:l.a.occupiedBoxInfo,style:this.props.isFromPlate?{borderLeft:"none"}:{}},i.a.createElement("div",{className:l.a.occupiedBoxInfoTitle},this.props.isFromPlate?i.a.createElement("span",{className:l.a.complianceRate}):i.a.createElement("a",{"data-businessid":e.id,"data-businessname":e.name,onClick:this.businessModule,href:"javascript:;"},"核心业务模块")),i.a.createElement("div",{className:l.a.occupiedBoxInfoInner},i.a.createElement("div",{className:l.a.infoUnverified},i.a.createElement(p.a,{type:"question-circle"}),i.a.createElement("span",{className:l.a.word},"未验证: ",e.unverified)),i.a.createElement("div",{className:l.a.infoUnqualified},i.a.createElement(p.a,{type:"exclamation-circle"}),i.a.createElement("span",{className:l.a.word},"未达标: ",e.unqualified)),i.a.createElement("div",{className:l.a.infoQualified},i.a.createElement(p.a,{type:"check-circle"}),i.a.createElement("span",{className:l.a.word},"已达标: ",e.qualified))))))}}n.__decorate([Object(c.Bind)(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Object]),n.__metadata("design:returntype",void 0)],h.prototype,"complianceRate",null),n.__decorate([Object(c.Bind)(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Object]),n.__metadata("design:returntype",void 0)],h.prototype,"businessModule",null)}}]);
//# sourceMappingURL=BusinessCa13.js.map